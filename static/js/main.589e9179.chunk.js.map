{"version":3,"sources":["gameContext.ts","components/screen/screen-left/board/row/cell/CellC.tsx","components/screen/screen-left/board/row/Row.tsx","components/screen/screen-left/board/Board.tsx","components/screen/screen-left/ScreenLeft.tsx","components/screen/screen-right/ScreenRight.tsx","components/screen/Screen.tsx","components/controller/controller-left/ControllerLeft.tsx","game/command.ts","components/controller/controller-right/cross-keys/CrossKeys.tsx","components/controller/controller-right/rotation-keys/RotationKeys.tsx","components/controller/controller-right/ControllerRight.tsx","components/controller/Controller.tsx","game/color.ts","game/lib/matrix.ts","game/mino.ts","game/shape.ts","game/rotation.ts","game/random.ts","game/game.ts","App.tsx","hooks/useKeyDown.ts","reportWebVitals.ts","index.tsx"],"names":["GameContext","createContext","CellC","color","className","Row","cells","map","cell","index","Board","gameState","useContext","rows","row","ScreenLeft","ScreenRight","Screen","ControllerLeft","Command","CrossKeys","setGameState","type","onClick","game","input","Up","Left","Right","Down","RotationKeys","RotationLeft","RotationRight","ControllerRight","Controller","Color","MinoType","rotateMatrix90","a","_","c","r","reverse","rotateMatrix180","Shape","positions","rightCol","Math","max","p","col","leftCol","min","bottomRow","matrix","flatMap","bs","irow","b","icol","position","filter","Rotation","d","fromMatrix","Direction","rotations","i","o","t","s","z","l","j","Mino","minoType","rotation","direction","A","this","B","C","D","Error","minoFactory","I","LightBlue","O","Yellow","T","Purple","S","Green","Z","Red","L","Orange","J","Blue","random","floor","CurrentMino","mino","getShape","move","Game","currentMino","forEach","command","drop","state","moveRight","moveDown","moveLeft","rotationRight","nextMino","ncol","collided","nrow","undefined","find","None","Array","fill","key","create","App","keyFs","useState","f","useEffect","document","addEventListener","e","keyF","Provider","value","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.589e9179.chunk.js","sourcesContent":["import {createContext} from \"react\";\nimport {GameState} from \"./game/game\";\n\n\ntype GameContextType = {\n    gameState: GameState\n    setGameState: (gameState: GameState) => void\n}\n\nconst GameContext = createContext({} as GameContextType)\n\nexport default GameContext\n","import React from 'react';\nimport './Cell.scss';\nimport {Color} from \"../../../../../../game/color\";\n\ntype CellProps = {\n    color: Color\n}\n\nexport default function CellC({ color }: CellProps) {\n    return (\n        <div className={`cell cell--${color}`}>\n\n        </div>\n    )\n}\n","import React from 'react';\nimport './Row.scss';\nimport {Cell} from \"../../../../../game/game\";\nimport CellC from \"./cell/CellC\";\n\ntype RowProps = {\n    cells: Cell[]\n}\n\nexport default function Row({ cells }: RowProps) {\n    return (\n        <div className=\"row\">\n            { cells.map((cell, index) => (\n                <div className=\"row__cells\" key={index}>\n                    <CellC color={cell}/>\n                </div>\n            )) }\n        </div>\n    )\n}\n","import React, {useContext} from 'react';\nimport './Board.scss';\nimport GameContext from \"../../../../gameContext\";\nimport Row from \"./row/Row\";\n\nexport default function Board() {\n    const { gameState } = useContext(GameContext)\n\n    return (\n        <div className=\"board\">\n            { gameState.rows.map((row, index) => (\n                <div className=\"board__row\" key={index}>\n                    <Row cells={row}/>\n                </div>\n            )) }\n        </div>\n    )\n}\n","import React from 'react';\nimport './ScreenLeft.scss';\nimport Board from \"./board/Board\";\n\nexport default function ScreenLeft() {\n    return (\n        <div className=\"screenLeft\">\n            <div className=\"screenLeft__board\">\n                <Board/>\n            </div>\n        </div>\n    )\n}\n","import React from 'react';\nimport './ScreenRight.scss';\n\nexport default function ScreenRight() {\n    return (\n        <div className=\"screenRight\">\n            <div className=\"screenRight__afterNext\">\n                afterNext\n            </div>\n            <div className=\"screenRight__hold\">\n                hold\n            </div>\n        </div>\n    )\n}\n","import React from 'react';\nimport './Screen.scss';\nimport ScreenLeft from \"./screen-left/ScreenLeft\";\nimport ScreenRight from \"./screen-right/ScreenRight\";\n\nexport default function Screen() {\n    return (\n        <div className=\"screen\">\n            <div className=\"screen__left\">\n                <ScreenLeft/>\n            </div>\n            <div className=\"screen__right\">\n                <ScreenRight/>\n            </div>\n        </div>\n    )\n}\n","import React from 'react';\nimport './ControllerLeft.scss';\n\nexport default function ControllerLeft() {\n    return (\n        <div className=\"controllerLeft\">\n            <p>pm/am</p>\n            <p>p/a</p>\n        </div>\n    )\n}\n","export enum Command {\n    Up,\n    Right,\n    Down,\n    Left,\n    RotationLeft,\n    RotationRight,\n}\n","import React, {useContext} from 'react';\nimport './CrossKeys.scss';\nimport GameContext from \"../../../../gameContext\";\nimport {game} from \"../../../../App\";\nimport {Command} from \"../../../../game/command\";\n\nexport default function CrossKeys() {\n    // eslint-disable-next-line\n    const { gameState, setGameState } = useContext(GameContext)\n\n    return (\n        <div className=\"crossKeys\">\n            <button\n                type=\"button\"\n                onClick={() => { setGameState(game.input(Command.Up)) }}\n            >上</button>\n            <br/>\n            <button\n                type=\"button\"\n                onClick={() => { setGameState(game.input(Command.Left)) }}\n            >左</button>\n            <button\n                type=\"button\"\n                onClick={() => { setGameState(game.input(Command.Right)) }}\n            >右</button>\n            <br/>\n            <button\n                type=\"button\"\n                onClick={() => { setGameState(game.input(Command.Down)) }}\n            >下</button>\n        </div>\n    )\n}\n","import React, {useContext} from 'react';\nimport './RotationKeys.scss';\nimport GameContext from \"../../../../gameContext\";\nimport {game} from \"../../../../App\";\nimport {Command} from \"../../../../game/command\";\n\nexport default function RotationKeys() {\n    // eslint-disable-next-line\n    const { gameState, setGameState } = useContext(GameContext)\n\n    return (\n        <div className=\"rotationKeys\">\n            <div className=\"rotationKeys__left\">\n                <button\n                    type=\"button\"\n                    onClick={() => { setGameState(game.input(Command.RotationLeft)) }}\n                >L</button>\n            </div>\n            <div className=\"rotationKeys__right\">\n                <button\n                    type=\"button\"\n                    onClick={() => { setGameState(game.input(Command.RotationRight)) }}\n                >R</button>\n            </div>\n        </div>\n    )\n}\n","import React from 'react';\nimport './ControllerRight.scss';\nimport CrossKeys from \"./cross-keys/CrossKeys\";\nimport RotationKeys from \"./rotation-keys/RotationKeys\";\n\nexport default function ControllerRight() {\n    return (\n        <div className=\"controllerRight\">\n            <div className=\"controllerRight__rotationKeys\">\n                <RotationKeys/>\n            </div>\n            <div className=\"controllerRight__crossKeys\">\n                <CrossKeys/>\n            </div>\n        </div>\n    )\n}\n","import React from 'react';\nimport './Controller.scss';\nimport ControllerLeft from \"./controller-left/ControllerLeft\";\nimport ControllerRight from \"./controller-right/ControllerRight\";\n\nexport default function Controller() {\n    return (\n        <div className=\"controller\">\n            <div className=\"controller__left\">\n                <ControllerLeft/>\n            </div>\n            <div className=\"controller__right\">\n                <ControllerRight/>\n            </div>\n        </div>\n    )\n}\n","export enum Color {\n    None = 'none',\n    LightBlue = 'lightBlue',\n    Yellow = 'yellow',\n    Purple = 'purple',\n    Green = 'green',\n    Red = 'red',\n    Orange = 'orange',\n    Blue = 'blue',\n}\n","export const rotateMatrixLeft = (a: boolean[][]): boolean[][] => a[0].map((_, c) => a.map(r => r[c])).reverse();\nexport const rotateMatrix90 = <T>(a: T[][]): T[][] => a[0].map((_, c) => a.map(r => r[c]).reverse());\nexport const rotateMatrix180 = <T>(a: T[][]): T[][] => rotateMatrix90(rotateMatrix90(a))\nexport const rotateMatrix270 = <T>(a: T[][]): T[][] => rotateMatrix180(rotateMatrix90(a))\n","import {getRandomInt} from \"./random\";\nimport {Color} from \"./color\";\nimport {Rotation} from \"./rotation\";\nimport {Shape} from \"./shape\";\n\nenum MinoType {\n    I,\n    O,\n    T,\n    S,\n    Z,\n    L,\n    J,\n}\n\nconst rotations = {\n    i: Rotation.fromMatrix([\n        [false, false, false, false],\n        [true, true, true, true],\n        [false, false, false, false],\n        [false, false, false, false],\n    ]),\n    o: Rotation.fromMatrix([\n        [true, true],\n        [true, true],\n    ]),\n    t: Rotation.fromMatrix([\n        [false, true, false],\n        [true, true, true],\n        [false, false, false],\n    ]),\n    s: Rotation.fromMatrix([\n        [false, true, true],\n        [true, true, false],\n        [false, false, false],\n    ]),\n    z: Rotation.fromMatrix([\n        [true, true, false],\n        [false, true, true],\n        [false, false, false],\n    ]),\n    l: Rotation.fromMatrix([\n        [false, false, true],\n        [true, true, true],\n        [false, false, false],\n    ]),\n    j: Rotation.fromMatrix([\n        [true, false, false],\n        [true, true, true],\n        [false, false, false],\n    ]),\n}\n\nexport enum Direction {\n    A,\n    B,\n    C,\n    D\n}\n\nexport class Mino {\n\n    constructor(\n        readonly minoType: MinoType,\n        readonly rotation: Rotation,\n        readonly color: Color,\n    ) {}\n\n    public getShape(direction: Direction): Shape {\n        if (direction === Direction.A) {\n            return this.rotation.a\n        } else if (direction === Direction.B) {\n            return this.rotation.b\n        } else if (direction === Direction.C) {\n            return this.rotation.c\n        } else if (direction === Direction.D) {\n            return this.rotation.d\n        }\n        throw Error(\"no direction found\")\n    }\n}\n\nexport const minoFactory = {\n    i(): Mino {\n        return new Mino(\n            MinoType.I,\n            rotations.i,\n            Color.LightBlue,\n        )\n    },\n    o(): Mino {\n        return new Mino(\n            MinoType.O,\n            rotations.o,\n            Color.Yellow,\n        )\n    },\n    t(): Mino {\n        return new Mino(\n            MinoType.T,\n            rotations.t,\n            Color.Purple,\n        )\n    },\n    s(): Mino {\n        return new Mino(\n            MinoType.S,\n            rotations.s,\n            Color.Green,\n        )\n    },\n    z(): Mino {\n        return new Mino(\n            MinoType.Z,\n            rotations.z,\n            Color.Red,\n        )\n    },\n    l(): Mino {\n        return new Mino(\n            MinoType.L,\n            rotations.l,\n            Color.Orange,\n        )\n    },\n    j(): Mino {\n        return new Mino(\n            MinoType.J,\n            rotations.j,\n            Color.Blue,\n        )\n    },\n    random(): Mino {\n        const rand =　getRandomInt(7)\n        switch (rand) {\n            case 0: return this.i()\n            case 1: return this.o()\n            case 2: return this.t()\n            case 3: return this.s()\n            case 4: return this.z()\n            case 5: return this.l()\n            case 6: return this.j()\n            default: throw Error(\"failed to create random mino\")\n        }\n    }\n}\n","import {Position} from \"./potision\";\n\nexport class Shape {\n    constructor(\n        readonly positions: Position[]\n    ) {\n    }\n\n    rightCol = (): number => Math.max(...this.positions.map(p => p.col))\n\n    leftCol = (): number => Math.min(...this.positions.map(p => p.col))\n\n    bottomRow = (): number => Math.max(...this.positions.map(p => p.row))\n\n    public static fromMatrix(matrix: boolean[][]): Shape {\n        return new Shape(\n            matrix.flatMap((bs, irow) => {\n                return bs.map((b, icol) => {\n                    return {b: b, position: {row: irow, col: icol}}\n                }).filter(b => b.b)\n            }).map(bs => bs.position)\n        )\n    }\n}\n","import {rotateMatrix180, rotateMatrix270, rotateMatrix90} from \"./lib/matrix\";\nimport {Shape} from \"./shape\";\n\nexport class Rotation {\n    constructor(\n        readonly a: Shape,\n        readonly b: Shape,\n        readonly c: Shape,\n        readonly d: Shape,\n    ) {\n    }\n\n    public static fromMatrix(matrix: boolean[][]): Rotation {\n        return new Rotation(\n            Shape.fromMatrix(matrix),\n            Shape.fromMatrix(rotateMatrix90(matrix)),\n            Shape.fromMatrix(rotateMatrix180(matrix)),\n            Shape.fromMatrix(rotateMatrix270(matrix)),\n        )\n    }\n}\n","export function getRandomInt(max: number) {\n    return Math.floor(Math.random() * max);\n}\n","import {Direction, Mino, minoFactory} from \"./mino\";\nimport {Position} from \"./potision\";\nimport {Color} from \"./color\";\nimport {Command} from \"./command\";\nimport {Shape} from \"./shape\";\n\nexport type Cell = Color\n\ntype Row = Cell[]\n\n\n\nclass CurrentMino {\n\n    constructor(\n        readonly mino: Mino,\n        readonly position: Position,\n        readonly direction: Direction,\n    ) {}\n\n    public getShape(): Shape {\n        return this.mino.getShape(this.direction)\n    }\n\n    public rotationRight(): CurrentMino {\n        if (this.direction === Direction.A) {\n            return new CurrentMino(this.mino, this.position, Direction.B)\n        } else if (this.direction === Direction.B) {\n            return new CurrentMino(this.mino, this.position, Direction.C)\n        } else if (this.direction === Direction.C) {\n            return new CurrentMino(this.mino, this.position, Direction.D)\n        } else if (this.direction === Direction.D) {\n            return new CurrentMino(this.mino, this.position, Direction.A)\n        }\n\n        throw Error('invalid diredtion found: ' + this.direction)\n    }\n\n    public moveRight(): CurrentMino {\n        return this.move({ row: this.position.row, col: this.position.col + 1 })\n    }\n\n    public moveLeft(): CurrentMino {\n        return this.move({ row: this.position.row, col: this.position.col - 1 })\n    }\n\n    public moveDown(): CurrentMino {\n        return this.move({ row: this.position.row + 1, col: this.position.col })\n    }\n\n    private move(position: Position): CurrentMino {\n        return new CurrentMino(this.mino, position, this.direction)\n    }\n\n    public rightCol(): number {\n        return this.position.col + this.getShape().rightCol()\n    }\n\n    public leftCol(): number {\n        return this.position.col + this.getShape().leftCol()\n    }\n\n    public bottomRow(): number {\n        return this.position.row + this.getShape().bottomRow()\n    }\n}\n\nexport type GameState = {\n    rows: Row[]\n}\n\nexport class Game {\n\n    private static ncol = 10\n    private static nrow = 20\n\n    constructor(\n        private currentMino: CurrentMino,\n        private rows: Row[],\n    ) {}\n\n    static create(): Game {\n        const rows = Array(this.nrow)\n            .fill(0)\n            .map(_ => Array(this.ncol).fill(Color.None))\n        const currentMino = new CurrentMino(minoFactory.j(), { row: 0, col: 3 }, Direction.A)\n\n        return new Game(currentMino, rows)\n    }\n\n    get state(): GameState {\n        const rows = this.rows.map(row => row.map(cell => cell))\n        this.currentMino.getShape().positions.forEach(position => {\n            rows[this.currentMino.position.row + position.row][this.currentMino.position.col + position.col] = this.currentMino.mino.color\n        })\n        return { rows }\n    }\n\n    public input(command: Command): GameState {\n        if (command === Command.Up) {\n            // mino を一番下まで落とす\n            this.drop()\n\n            // rows を state().rows に置き換え\n            this.rows = this.state.rows\n\n            // 次のミノを表示\n            this.currentMino = new CurrentMino(minoFactory.random(), { row: 0, col: 3 }, Direction.A)\n        } else if (command === Command.Right) {\n            this.moveRight()\n        } else if (command === Command.Down) {\n            this.moveDown()\n        } else if (command === Command.Left) {\n            this.moveLeft()\n        } else if (command === Command.RotationLeft) {\n            // this.currentMino.mino = rotationRight(this.currentMino.mino)\n        } else if (command === Command.RotationRight) {\n            this.currentMino = this.currentMino.rotationRight()\n        }\n        return this.state\n    }\n\n    private moveRight() {\n        const nextMino = this.currentMino.moveRight()\n\n        if (nextMino.rightCol() >= Game.ncol) {\n            return\n        }\n\n        if (this.collided(nextMino)) {\n            return\n        }\n\n        this.currentMino = nextMino\n    }\n\n    private moveLeft() {\n        const nextMino = this.currentMino.moveLeft()\n\n        if (nextMino.leftCol() < 0) {\n            return\n        }\n\n        if(this.collided(nextMino)) {\n            return\n        }\n\n        this.currentMino = nextMino\n    }\n\n    private moveDown() {\n        const nextMino = this.currentMino.moveDown()\n\n        if (nextMino.bottomRow() >= Game.nrow) {\n            return\n        }\n\n        if(this.collided(nextMino)) {\n            return\n        }\n\n        this.currentMino = nextMino\n    }\n\n    private drop() {\n        while (true) {\n            const nextMino = this.currentMino.moveDown()\n\n            if (nextMino.bottomRow() >= Game.nrow) {\n                break\n            }\n\n            if(this.collided(nextMino)) {\n                break\n            }\n\n            this.currentMino = nextMino\n        }\n    }\n\n    private collided(currentMino: CurrentMino): boolean {\n        return currentMino.getShape().positions.map(position => {\n            return {\n                row: position.row + currentMino.position.row,\n                col: position.col + currentMino.position.col,\n            }\n        }).find(p => {\n            return this.rows[p.row][p.col] !== Color.None\n        }) !== undefined\n    }\n}\n","import React, {useState} from 'react';\nimport './App.scss';\nimport Screen from \"./components/screen/Screen\";\nimport Controller from \"./components/controller/Controller\";\nimport GameContext from \"./gameContext\";\nimport {Game} from \"./game/game\";\nimport {useKeyDown} from \"./hooks/useKeyDown\";\nimport {Command} from \"./game/command\";\n\nconst key = {\n    down: 'ArrowDown',\n    up: 'ArrowUp',\n    right: 'ArrowRight',\n    left: 'ArrowLeft',\n    z: 'z',\n    x: 'x',\n}\n\nexport const game = Game.create()\n\nfunction App() {\n    const [gameState, setGameState] = useState(game.state)\n    useKeyDown([\n        { key: key.down,  f: () => { setGameState(game.input(Command.Down)) } },\n        { key: key.up,  f: () => { setGameState(game.input(Command.Up)) } },\n        { key: key.right,  f: () => { setGameState(game.input(Command.Right)) } },\n        { key: key.left,  f: () => { setGameState(game.input(Command.Left)) } },\n        { key: key.z,  f: () => { setGameState(game.input(Command.RotationLeft)) } },\n        { key: key.x,  f: () => { setGameState(game.input(Command.RotationRight)) } },\n    ])\n\n    return (\n        <GameContext.Provider value={{gameState, setGameState}}>\n            <div className=\"app\">\n                <div className=\"app__screen\">\n                    <Screen/>\n                </div>\n                <div className=\"app_controller\">\n                    <Controller/>\n                </div>\n            </div>\n        </GameContext.Provider>\n    );\n}\n\nexport default App;\n","import {useEffect} from \"react\";\n\ntype KeyF = {\n    key: string,\n    f: () => void\n}\n\nexport function useKeyDown(keyFs: KeyF[]) {\n    useEffect(() => {\n        document.addEventListener(\"keydown\", e => {\n            const keyF = keyFs.find(keyF => keyF.key === e.key)\n            if (keyF) {\n                keyF.f()\n            }\n\n        }, false);\n        // eslint-disable-next-line\n    }, [])\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}