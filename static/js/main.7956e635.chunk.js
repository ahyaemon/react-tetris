(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],[,,,,,,,,,,,,,,function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},,function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var o=e(1),r=e.n(o),c=e(7),i=e.n(c),s=e(9),l=(e(14),e(15),e(16),e(17),Object(o.createContext)({})),u=(e(18),e(19),e(0));function a(t){var n=t.color;return Object(u.jsx)("div",{className:"cell cell--".concat(n)})}function h(t){var n=t.cells;return Object(u.jsx)("div",{className:"row",children:n.map((function(t,n){return Object(u.jsx)("div",{className:"row__cells",children:Object(u.jsx)(a,{color:t})},n)}))})}function f(){var t=Object(o.useContext)(l).gameState;return Object(u.jsx)("div",{className:"board",children:t.rows.map((function(t,n){return Object(u.jsx)("div",{className:"board__row",children:Object(u.jsx)(h,{cells:t})},n)}))})}function j(){return Object(u.jsx)("div",{className:"screenLeft",children:Object(u.jsx)("div",{className:"screenLeft__board",children:Object(u.jsx)(f,{})})})}e(21);function d(){return Object(u.jsxs)("div",{className:"screenRight",children:[Object(u.jsx)("div",{className:"screenRight__afterNext",children:"afterNext"}),Object(u.jsx)("div",{className:"screenRight__hold",children:"hold"})]})}function w(){return Object(u.jsxs)("div",{className:"screen",children:[Object(u.jsx)("div",{className:"screen__left",children:Object(u.jsx)(j,{})}),Object(u.jsx)("div",{className:"screen__right",children:Object(u.jsx)(d,{})})]})}e(22),e(23);function p(){return Object(u.jsxs)("div",{className:"controllerLeft",children:[Object(u.jsx)("p",{children:"prev mino/after mino"}),Object(u.jsx)("p",{children:"prev/after"})]})}e(24),e(25);var b,m,v=e(4),O=e(8),x=e(5);!function(t){t.None="none",t.LightBlue="lightBlue",t.Yellow="yellow",t.Purple="purple",t.Green="green",t.Red="red",t.Orange="orange",t.Blue="blue"}(b||(b={})),function(t){t[t.I=0]="I",t[t.O=1]="O",t[t.T=2]="T",t[t.S=3]="S",t[t.Z=4]="Z",t[t.L=5]="L",t[t.J=6]="J"}(m||(m={}));var g,M=function t(n,e,o){var r=this;Object(v.a)(this,t),this.minoType=n,this.shape=e,this.color=o,this.rightCol=function(){return Math.max.apply(Math,Object(x.a)(r.shape.map((function(t){return t.col}))))},this.leftCol=function(){return Math.min.apply(Math,Object(x.a)(r.shape.map((function(t){return t.col}))))},this.bottomRow=function(){return Math.max.apply(Math,Object(x.a)(r.shape.map((function(t){return t.row}))))},this.shapeToIndex=function(t){return t.flatMap((function(t){return t.map((function(t,n){return{b:t,i:n}})).filter((function(t){return t.b})).map((function(t){return t.i}))}))}},y={i:function(){return new M(m.I,[{row:0,col:0},{row:1,col:0},{row:2,col:0},{row:3,col:0}],b.LightBlue)},o:function(){return new M(m.O,[{row:0,col:0},{row:0,col:1},{row:1,col:0},{row:1,col:1}],b.Yellow)},t:function(){return new M(m.T,[{row:0,col:1},{row:1,col:0},{row:1,col:1},{row:1,col:2}],b.Purple)},s:function(){return new M(m.S,[{row:0,col:1},{row:0,col:2},{row:1,col:0},{row:1,col:1}],b.Green)},z:function(){return new M(m.Z,[{row:0,col:0},{row:0,col:1},{row:1,col:1},{row:1,col:2}],b.Red)},l:function(){return new M(m.L,[{row:0,col:2},{row:1,col:0},{row:1,col:1},{row:1,col:2}],b.Orange)},j:function(){return new M(m.J,[{row:0,col:0},{row:1,col:0},{row:1,col:1},{row:1,col:2}],b.Blue)},random:function(){var t;switch(t=7,Math.floor(Math.random()*t)){case 0:return this.i();case 1:return this.o();case 2:return this.t();case 3:return this.s();case 4:return this.z();case 5:return this.l();case 6:return this.j();default:throw Error("failed to create random mino")}}};!function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(g||(g={}));var N=function(){function t(n,e){Object(v.a)(this,t),this.currentMino=n,this.rows=e}return Object(O.a)(t,[{key:"state",get:function(){var t=this,n=this.rows.map((function(t){return t.map((function(t){return t}))}));return this.currentMino.mino.shape.forEach((function(e){n[t.currentMino.position.row+e.row][t.currentMino.position.col+e.col]=t.currentMino.mino.color})),{rows:n}}},{key:"input",value:function(t){return t===g.Up?(this.drop(),this.rows=this.state.rows,this.currentMino={mino:y.random(),position:{row:0,col:3},rotation:0}):t===g.Right?this.moveRight():t===g.Down?this.moveDown():t===g.Left&&this.moveLeft(),this.state}},{key:"moveRight",value:function(){var n={row:this.currentMino.position.row,col:this.currentMino.position.col+1};n.col+this.currentMino.mino.rightCol()<t.ncol&&!this.collided(n)&&(this.currentMino.position=n)}},{key:"moveLeft",value:function(){var t={row:this.currentMino.position.row,col:this.currentMino.position.col-1};t.col+this.currentMino.mino.leftCol()>=0&&!this.collided(t)&&(this.currentMino.position=t)}},{key:"moveDown",value:function(){var n={row:this.currentMino.position.row+1,col:this.currentMino.position.col};n.row+this.currentMino.mino.bottomRow()<t.nrow&&!this.collided(n)&&(this.currentMino.position=n)}},{key:"drop",value:function(){for(;;){var n={row:this.currentMino.position.row+1,col:this.currentMino.position.col};if(!(n.row+this.currentMino.mino.bottomRow()<t.nrow)||this.collided(n))break;this.currentMino.position=n}}},{key:"collided",value:function(t){var n=this;return void 0!==this.currentMino.mino.shape.map((function(n){return{row:t.row+n.row,col:t.col+n.col}})).find((function(t){return n.rows[t.row][t.col]!==b.None}))}}],[{key:"create",value:function(){var n=this,e=Array(this.nrow).fill(0).map((function(t){return Array(n.ncol).fill(b.None)}));return new t({mino:y.j(),position:{row:0,col:3},rotation:0},e)}}]),t}();function _(){var t=Object(o.useContext)(l),n=(t.gameState,t.setGameState);return Object(u.jsxs)("div",{className:"crossKeys",children:[Object(u.jsx)("button",{type:"button",onClick:function(){n(B.input(g.Up))},children:"\u4e0a"}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",onClick:function(){n(B.input(g.Left))},children:"\u5de6"}),Object(u.jsx)("button",{type:"button",onClick:function(){n(B.input(g.Right))},children:"\u53f3"}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",onClick:function(){n(B.input(g.Down))},children:"\u4e0b"})]})}function k(){return Object(u.jsx)("div",{className:"controllerRight",children:Object(u.jsx)("div",{className:"controllerRight__crossKeys",children:Object(u.jsx)(_,{})})})}function L(){return Object(u.jsxs)("div",{className:"controller",children:[Object(u.jsx)("div",{className:"controller__left",children:Object(u.jsx)(p,{})}),Object(u.jsx)("div",{className:"controller__right",children:Object(u.jsx)(k,{})})]})}N.ncol=10,N.nrow=20;var R="ArrowDown",C="ArrowUp",S="ArrowRight",D="ArrowLeft",B=N.create();var T=function(){var t,n=Object(o.useState)(B.state),e=Object(s.a)(n,2),r=e[0],c=e[1];return t=[{key:R,f:function(){c(B.input(g.Down))}},{key:C,f:function(){c(B.input(g.Up))}},{key:S,f:function(){c(B.input(g.Right))}},{key:D,f:function(){c(B.input(g.Left))}}],Object(o.useEffect)((function(){document.addEventListener("keydown",(function(n){var e=t.find((function(t){return t.key===n.key}));e&&e.f()}),!1)}),[]),Object(u.jsx)(l.Provider,{value:{gameState:r,setGameState:c},children:Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)("header",{className:"app__header",children:"tetris simulator"}),Object(u.jsx)("div",{className:"app__screen",children:Object(u.jsx)(w,{})}),Object(u.jsx)("div",{className:"app_controller",children:Object(u.jsx)(L,{})})]})})},A=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,27)).then((function(n){var e=n.getCLS,o=n.getFID,r=n.getFCP,c=n.getLCP,i=n.getTTFB;e(t),o(t),r(t),c(t),i(t)}))};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(T,{})}),document.getElementById("root")),A()}],[[26,1,2]]]);
//# sourceMappingURL=main.7956e635.chunk.js.map